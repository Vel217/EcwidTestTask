import{p as v,r as f,d as w,c as _,i as b,l as I,k as B,h,b as u,j as k,a as S,f as $,t as d}from"./index-DgJ-tQ9r.js";import{a as m}from"./ProductCard.vue_vue_type_script_setup_true_lang-D1ri-fQJ.js";import{_ as A}from"./GradientPlaceholder.vue_vue_type_script_setup_true_lang-8FIkg_fq.js";const U={async getAll(e=0){try{return(await m.get("categories",{params:{parentId:e,enabled:!0}})).data}catch(t){throw console.error("Error fetching categories:",t),t}},async getById(e){try{return(await m.get(`categories/${e}`,{})).data}catch(t){throw console.error(`Error fetching category ${e}:`,t),t}}},E=5*60*1e3;function g(e){const t=e.split("/");return t[t.length-1]||""}const N=v("category",()=>{const e=f([]),t=f(0),c=async(o=!1)=>{const a=Date.now();if(!o&&e.value&&a-t.value<E)return e.value;const s=await U.getAll();return e.value=s.items,t.value=a,e.value};return{categories:e,fetchAllCategories:c,getCategoryByPath:async(o,a)=>{const s=await c(),r=s.find(l=>g(l.url)===a);if(!r)return null;if(!o)return r.parentId?null:r;const n=s.find(l=>l.id===r.parentId);return n&&g(n.url)===o?r:null},getSubcategories:async o=>(await c()).filter(s=>s.parentId===o),getTopLevelCategories:async()=>(await c()).filter(a=>!a.parentId),getCategoryBreadcrumb:async o=>{const a=await c(),s=[];let r=a.find(n=>n.id===o);for(;r;)s.unshift(r),r=r.parentId?a.find(n=>n.id===r.parentId):void 0;return s},getCategoryUrl:(o,a)=>{var r;const s=g(o.url);if(a||o.parentId){const n=a||((r=e.value)==null?void 0:r.find(l=>l.id===o.parentId));if(n)return`/category/${g(n.url)}/${s}`}return`/category/${s}`}}}),T={class:"aspect-w-16 aspect-h-9 bg-gray-200"},j={class:"h-40 w-full object-cover object-center hover:scale-105 transition-transform duration-300"},x={class:"p-4"},D={class:"text-lg font-semibold text-gray-900 hover:text-blue-600 transition-colors"},V={key:0,class:"mt-1 text-sm text-gray-500"},O=w({__name:"CategoryCard",props:{category:{},parentCategory:{}},setup(e){const t=e,c=N(),p=_(()=>c.getCategoryUrl(t.category,t.parentCategory));return(i,C)=>{const y=I("router-link");return h(),b(y,{to:p.value,class:"block bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300"},{default:B(()=>[u("div",T,[u("div",j,[k(A,{seed:`category-${i.category.id}`,class:"h-40 w-full"},null,8,["seed"])])]),u("div",x,[u("h3",D,d(i.category.name),1),i.category.productCount!==void 0?(h(),S("p",V,d(i.category.productCount)+" "+d(i.category.productCount===1?"product":"products"),1)):$("",!0)])]),_:1},8,["to"])}}});export{O as _,N as u};
