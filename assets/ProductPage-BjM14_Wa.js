import{d as w,r as f,c as k,a as s,b as l,f as p,i as V,F as I,g as $,q as N,h as a,u as P,j as U,l as F,e as g,R as j,k as R,t as i,n as T,w as O,s as M,v as E,x as D,y as L,z as A,m as H}from"./index-DgJ-tQ9r.js";import{u as z}from"./productStore-DZZHXIAW.js";import{_ as G}from"./GradientPlaceholder.vue_vue_type_script_setup_true_lang-8FIkg_fq.js";import{_ as J}from"./ProductCard.vue_vue_type_script_setup_true_lang-D1ri-fQJ.js";const K={class:"space-y-4"},Q={class:"relative bg-white rounded-lg overflow-hidden"},W=["src","alt"],X={key:0,class:"flex gap-2 overflow-x-auto pb-2"},Y=["onClick"],Z=["src","alt"],ee=w({__name:"ProductImageGallery",props:{images:{},productName:{},productId:{},singleImageUrl:{},singleOriginalImageUrl:{}},setup(o){const r=o,t=f(0),b=k(()=>r.images.length>0?r.images:r.singleImageUrl||r.singleOriginalImageUrl?[{id:"single",url:r.singleImageUrl||r.singleOriginalImageUrl||"",imageUrl:r.singleImageUrl||"",originalImageUrl:r.singleOriginalImageUrl||"",thumbnail:r.singleImageUrl||"",thumbnailUrl:r.singleImageUrl||"",hdThumbnailUrl:"",smallThumbnailUrl:""}]:[]),n=k(()=>b.value),_=k(()=>n.value[t.value]),e=()=>{t.value<n.value.length-1&&t.value++},x=()=>{t.value>0&&t.value--};return(u,d)=>(a(),s("div",K,[l("div",Q,[_.value?(a(),s("img",{key:0,src:_.value.originalImageUrl||_.value.imageUrl,alt:u.productName,class:"w-full h-auto object-cover"},null,8,W)):(a(),V(G,{key:1,seed:`product-${u.productId}`,class:"w-full h-96"},null,8,["seed"])),n.value.length>1&&t.value>0?(a(),s("button",{key:2,class:"absolute left-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-md transition-colors","aria-label":"Previous image",onClick:x},d[0]||(d[0]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]))):p("",!0),n.value.length>1&&t.value<n.value.length-1?(a(),s("button",{key:3,class:"absolute right-2 top-1/2 -translate-y-1/2 bg-white/80 hover:bg-white p-2 rounded-full shadow-md transition-colors","aria-label":"Next image",onClick:e},d[1]||(d[1]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]))):p("",!0)]),n.value.length>1?(a(),s("div",X,[(a(!0),s(I,null,$(n.value,(v,h)=>(a(),s("button",{key:v.id,class:N(["flex-shrink-0 w-20 h-20 rounded-md overflow-hidden border-2 transition-colors",t.value===h?"border-blue-600":"border-gray-300 hover:border-gray-400"]),onClick:C=>t.value=h},[l("img",{src:v.thumbnailUrl||v.imageUrl,alt:`${u.productName} thumbnail ${h+1}`,class:"w-full h-full object-cover"},null,8,Z)],10,Y))),128))])):p("",!0)]))}}),te={class:"mb-6 flex items-center space-x-2 text-sm text-gray-600"},le={class:"text-gray-900"},ae=w({__name:"ProductBreadcrumbs",props:{product:{}},setup(o){const{t:r}=P();return(t,b)=>{const n=F("router-link");return a(),s("nav",te,[U(n,{to:{name:g(j).HOME},class:"hover:text-blue-600"},{default:R(()=>[T(i(g(r)("common.home")),1)]),_:1},8,["to"]),b[0]||(b[0]=l("span",null,"/",-1)),l("span",le,i(t.product.name),1)])}}}),se={class:"mb-6"},re={class:"text-3xl font-bold text-gray-900 mb-2"},oe={key:0,class:"text-xl font-bold text-gray-300"},ne={key:1,class:"inline-flex shrink-0 items-center rounded-full bg-green-50 px-1.5 py-1 text-l font-medium text-green-700 ring-1 ring-inset ring-green-600/20 mt-4"},ie={key:2,class:"mt-2 text-red-600 font-semibold"},ue=w({__name:"ProductPriceBlock",props:{product:{}},setup(o){const{t:r}=P(),t=o,b=k(()=>t.product.tax?((t.product.defaultDisplayedPrice||t.product.price)*t.product.tax.defaultLocationIncludedTaxRate/100).toFixed(2):"0.00");return(n,_)=>{var e;return a(),s("div",se,[l("p",re,i(n.product.defaultDisplayedPriceFormatted||`$${n.product.price.toFixed(2)}`),1),n.product.tax?(a(),s("p",oe,i(g(r)("ProductPage.taxInclude"))+": ("+i(n.product.tax.defaultLocationIncludedTaxRate)+"%) "+i(`${((e=n.product.defaultDisplayedPriceFormatted)==null?void 0:e[0])||"$"} ${b.value}`),1)):p("",!0),n.product.hasFreeShipping?(a(),s("p",ne,i(g(r)("ProductPage.freeShipping")),1)):p("",!0),n.product.inStock?p("",!0):(a(),s("p",ie,i(g(r)("ProductPage.outOfStock")),1))])}}}),de={class:"text-sm font-medium text-gray-500 my-2"},ce={key:0,class:"mb-6 space-y-6"},me=["aria-label"],ge={class:"block text-sm font-medium text-gray-700"},pe={key:0,class:"text-red-500"},ve={class:"mt-2 grid grid-cols-2 gap-3 sm:grid-cols-3"},he=["onUpdate:modelValue","name","value","required"],be={class:"text-sm font-medium text-center group-has-[:checked]:text-white"},_e={key:0},fe=w({__name:"ProductOptionsBlock",props:{product:{},modelValue:{}},emits:["update:modelValue"],setup(o,{emit:r}){const{t}=P(),b=o,n=r,_=f({...b.modelValue});return O(_,e=>{n("update:modelValue",e)},{deep:!0}),(e,x)=>(a(),s("div",null,[l("div",de,i(g(t)("ProductPage.sku"))+": "+i(e.product.sku),1),e.product.options&&e.product.options.length>0?(a(),s("div",ce,[(a(!0),s(I,null,$(e.product.options,u=>(a(),s("fieldset",{key:u.name,class:"space-y-2","aria-label":`Choose a ${u.name}`},[l("legend",ge,[T(i(u.name)+" ",1),u.required?(a(),s("span",pe,"*")):p("",!0)]),l("div",ve,[(a(!0),s(I,null,$(u.choices,d=>(a(),s("label",{key:d.text,class:"group relative flex items-center justify-center rounded-md border border-gray-300 bg-white p-3 has-[:checked]:border-blue-600 has-[:checked]:bg-blue-600 has-[:focus-visible]:outline has-[:focus-visible]:outline-2 has-[:focus-visible]:outline-offset-2 has-[:focus-visible]:outline-blue-600"},[M(l("input",{"onUpdate:modelValue":v=>_.value[u.name]=v,type:"radio",name:u.name,value:d.text,required:u.required,class:"absolute inset-0 appearance-none focus:outline-none"},null,8,he),[[E,_.value[u.name]]]),l("span",be,[T(i(d.text)+" ",1),d.priceModifier&&d.priceModifier>0?(a(),s("span",_e," (+$"+i(d.priceModifier.toFixed(2))+") ",1)):p("",!0)])]))),128))])],8,me))),128))])):p("",!0)]))}});function xe(o){var r;return o?o.galleryImages&&o.galleryImages.length>0?[{id:"0",url:o.imageUrl||o.originalImageUrl||"",imageUrl:o.imageUrl||"",originalImageUrl:o.originalImageUrl||"",thumbnail:o.thumbnailUrl||o.smallThumbnailUrl||"",thumbnailUrl:o.thumbnailUrl||"",hdThumbnailUrl:o.hdThumbnailUrl||"",smallThumbnailUrl:o.smallThumbnailUrl||""},...o.galleryImages]:(r=o.media)!=null&&r.images&&o.media.images.length>0?o.media.images.map(t=>({id:t.id,url:t.imageOriginalUrl||t.image1500pxUrl||t.image800pxUrl||"",imageUrl:t.image800pxUrl||t.image400pxUrl||"",originalImageUrl:t.imageOriginalUrl||"",thumbnail:t.image160pxUrl||"",thumbnailUrl:t.image400pxUrl||t.image160pxUrl||"",hdThumbnailUrl:t.image800pxUrl||"",smallThumbnailUrl:t.image160pxUrl||""})):[]:[]}const ye={class:"container mx-auto px-4 py-8"},ke={key:0,class:"flex justify-center items-center min-h-screen"},Ue={key:1,class:"text-center text-red-600 py-8"},Ie={key:2,class:"max-w-6xl mx-auto"},$e={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},we={class:"text-3xl font-bold text-gray-900 mb-4"},Pe={key:0,class:"mb-8 prose prose-gray max-w-none"},Ce={class:"text-xl font-semibold mb-4"},Te=["innerHTML"],Se={class:"flex flex-col gap-2 mb-8"},Ve={for:"quantity",class:"text-gray-700"},Oe=["disabled"],Me=["disabled"],qe={key:1,class:"mt-8"},Be={class:"text-xl font-semibold mb-4"},Ne={class:"divide-y divide-gray-200"},Fe={class:"text-gray-600"},je={class:"text-gray-900 font-medium"},Re={key:0,class:"mt-16"},Ee={class:"text-2xl font-semibold text-gray-900 mb-6"},De={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},Ge=w({__name:"ProductPage",setup(o){const{t:r}=P(),t=H(),b=A(),n=z(),{addToCart:_}=D(),e=f(null),x=f([]),u=f(1),d=f(!0),v=f(null),h=f({}),C=k(()=>{var y;return(y=e.value)!=null&&y.options?e.value.options.every(m=>!m.required||h.value[m.name]):!0}),q=k(()=>xe(e.value)),B=()=>{e.value&&e.value.inStock&&C.value&&(_(e.value,u.value,h.value),b.push("/cart"))},S=async()=>{var y;d.value=!0,v.value=null;try{const m=Number(t.params.id);e.value=await n.getProductById(m),h.value={},(y=e.value.options)==null||y.forEach(c=>{c.defaultChoice!==void 0&&(h.value[c.name]=c.choices[c.defaultChoice].text)}),x.value=await n.getRecommended(e.value,4),v.value=null}catch(m){v.value="Failed to load product.",console.error("Error fetching product:",m)}finally{d.value=!1}};return O(()=>t.params.id,()=>{u.value=1,h.value={},S()},{immediate:!0}),(y,m)=>(a(),s("div",ye,[d.value?(a(),s("div",ke,m[2]||(m[2]=[l("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):v.value?(a(),s("div",Ue,[l("p",null,i(v.value),1),l("button",{class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:S},i(g(r)("common.tryAgain")),1)])):e.value?(a(),s("div",Ie,[U(ae,{product:e.value},null,8,["product"]),l("div",$e,[U(ee,{images:q.value,"product-name":e.value.name,"product-id":e.value.id,"single-image-url":e.value.imageUrl,"single-original-image-url":e.value.originalImageUrl},null,8,["images","product-name","product-id","single-image-url","single-original-image-url"]),l("div",null,[l("h1",we,i(e.value.name),1),U(ue,{product:e.value},null,8,["product"]),e.value.description?(a(),s("div",Pe,[l("h2",Ce,i(g(r)("ProductPage.description")),1),l("div",{innerHTML:e.value.description},null,8,Te)])):p("",!0),U(fe,{modelValue:h.value,"onUpdate:modelValue":m[0]||(m[0]=c=>h.value=c),product:e.value},null,8,["modelValue","product"]),l("div",Se,[l("label",Ve,i(g(r)("ProductPage.quantity"))+":",1),M(l("input",{id:"quantity","onUpdate:modelValue":m[1]||(m[1]=c=>u.value=c),type:"number",min:"1",class:"w-20 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:!e.value.inStock},null,8,Oe),[[L,u.value,void 0,{number:!0}]])]),l("button",{class:"w-full md:w-auto px-8 py-3 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:!e.value.inStock||!C.value,onClick:B},i(e.value.inStock?g(r)("ProductPage.addToCart"):g(r)("ProductPage.outOfStock")),9,Me),e.value.attributes&&e.value.attributes.length>0?(a(),s("div",qe,[l("h2",Be,i(g(r)("ProductPage.specifications")),1),l("dl",Ne,[(a(!0),s(I,null,$(e.value.attributes,c=>(a(),s("div",{key:c.id,class:"py-3 flex justify-between"},[l("dt",Fe,i(c.name),1),l("dd",je,i(c.value),1)]))),128))])])):p("",!0)])]),x.value.length>0?(a(),s("section",Re,[l("h2",Ee,i(g(r)("ProductPage.recommendedProd")),1),l("div",De,[(a(!0),s(I,null,$(x.value,c=>(a(),V(J,{key:c.id,product:c},null,8,["product"]))),128))])])):p("",!0)])):p("",!0)]))}});export{Ge as default};
