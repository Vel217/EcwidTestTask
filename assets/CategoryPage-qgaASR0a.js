import{d as P,u as A,r as i,w as D,a,b as s,t as o,e as d,f as b,j as R,k as w,R as V,l as F,F as x,g as k,m as j,i as C,h as e,n as B}from"./index-CXnNeCKf.js";import{u as I,_ as L}from"./CategoryCard.vue_vue_type_script_setup_true_lang--MLPKHEZ.js";import{p as M,_ as O}from"./ProductCard.vue_vue_type_script_setup_true_lang-Cy5lcIGu.js";import"./GradientPlaceholder.vue_vue_type_script_setup_true_lang-C_Pf2PPf.js";const T={class:"container mx-auto px-4 py-8"},U={key:0,class:"flex justify-center items-center min-h-screen"},$={key:1,class:"text-center text-red-600 py-8"},H={key:2},q={class:"mb-6 flex items-center space-x-2 text-sm text-gray-600"},z={key:1,class:"text-gray-900"},G={class:"text-3xl font-bold text-gray-900 mb-8"},J={key:0,class:"mb-12"},K={class:"text-2xl font-semibold text-gray-800 mb-6"},Q={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},W={key:1},X={class:"text-2xl font-semibold text-gray-800 mb-6"},Y={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},Z={key:2,class:"text-center py-12 text-gray-500"},re=P({__name:"CategoryPage",setup(ee){const{t:g}=A(),m=j(),p=I(),l=i(null),_=i([]),y=i([]),v=i([]),f=i(!0),c=i(null),E=n=>{const r=v.value.find(u=>u.id===n.parentId);return p.getCategoryUrl(n,r)},S=async()=>{f.value=!0,c.value=null;try{const n=m.params.slug,r=m.params.parentSlug;if(l.value=await p.getCategoryByPath(r,n),!l.value){c.value="Category not found";return}const[u,h,t]=await Promise.all([p.getCategoryBreadcrumb(l.value.id),p.getSubcategories(l.value.id),M.getAll(l.value.id)]);v.value=u,_.value=h,y.value=t.items,c.value=null}catch(n){c.value="Failed to load category data.",console.error("Error fetching categories:",n)}finally{f.value=!1}};return D(()=>[m.params.slug,m.params.parentSlug],()=>S(),{immediate:!0}),(n,r)=>{var h;const u=F("router-link");return e(),a("div",T,[f.value?(e(),a("div",U,r[0]||(r[0]=[s("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},null,-1)]))):c.value?(e(),a("div",$,[s("p",null,o(c.value),1),s("button",{class:"mt-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",onClick:S},o(d(g)("common.tryAgain")),1)])):(e(),a("div",H,[s("nav",q,[R(u,{to:{name:d(V).HOME},class:"hover:text-blue-600"},{default:w(()=>[B(o(d(g)("common.home")),1)]),_:1},8,["to"]),(e(!0),a(x,null,k(v.value,(t,N)=>(e(),a(x,{key:t.id},[r[1]||(r[1]=s("span",null,"/",-1)),N<v.value.length-1?(e(),C(u,{key:0,to:E(t),class:"hover:text-blue-600"},{default:w(()=>[B(o(t.name),1)]),_:2},1032,["to"])):(e(),a("span",z,o(t.name),1))],64))),128))]),s("h1",G,o(((h=l.value)==null?void 0:h.name)||"Category"),1),_.value.length>0?(e(),a("section",J,[s("h2",K,o(d(g)("common.subcategories")),1),s("div",Q,[(e(!0),a(x,null,k(_.value,t=>(e(),C(L,{key:t.id,category:t,"parent-category":l.value},null,8,["category","parent-category"]))),128))])])):b("",!0),y.value.length>0?(e(),a("section",W,[s("h2",X,o(d(g)("common.products")),1),s("div",Y,[(e(!0),a(x,null,k(y.value,t=>(e(),C(O,{key:t.id,product:t},null,8,["product"]))),128))])])):b("",!0),_.value.length===0&&y.value.length===0?(e(),a("div",Z,[s("p",null,o(d(g)("CategoryPage.noProducts")),1)])):b("",!0)]))])}}});export{re as default};
